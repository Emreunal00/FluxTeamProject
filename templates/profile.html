<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil Sayfası</title>
    <link rel="stylesheet" href="../frontend/styles_profile.css">
</head>
<body>

    <div class="navbar">
        <div>
            <a href="/dashboard" class="flux-btn">FLUX</a>
        </div>
        <div>
            <a href="/logout" class="logout-btn">Çıkış Yap</a>
        </div>
    </div>

    <div class="profile-container">
        <h2>Profil Bilgileriniz</h2>
        <div class="profile-info">
            <img src="{{ user_profile_image }}" alt="Profil Resmi" id="profile-image">
            <div>
                <p><strong>Kullanıcı Adı:</strong> {{ user_username }}</p>
                <p><strong>E-posta:</strong> {{ user_email }}</p>
            </div>
        </div>

        <button class="update-btn" id="update-profile-btn">Profil Resmini Güncelle</button>

        <div id="image-upload-container" style="display: none;">
            <form id="image-upload-form" action="/update_profile_image" method="POST" enctype="multipart/form-data">
                <input type="file" name="profile-image" accept="image/*" id="profile-image-input" style="display: none;">
                <button type="submit" class="btn-success" id="upload-button">Yükle</button>
            </form>
        </div>
    </div>

    <!-- JavaScript kodları burada -->
    <script>
        const updateProfileBtn = document.getElementById("update-profile-btn");
        const profileImageInput = document.getElementById("profile-image-input");
        const uploadButton = document.getElementById("upload-button");

        updateProfileBtn.addEventListener("click", function() {
            profileImageInput.click();
        });

        profileImageInput.addEventListener("change", function() {
            if (profileImageInput.files.length > 0) {
                uploadButton.click();
            }
        });
    </script>
</body>
</html>
